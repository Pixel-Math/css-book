/*
    CSS do livro (EPUB-ready)
    Cores fornecidas:
    - Azul (bola/número do capítulo): #3b55a2
    - Cinza (títulos de seção/subseção): #80818e
    - Título das Partes e Capítulos: #75c9dc
    - Número de partes/capítulos: branco

    Convenções:
    - Usar classes semânticas: .part, .chapter, .section, .subsection, .figure, .table
    - Evitar posicionamentos absolutos; preferir layout fluido (compatível com EPUB)
    - Tipografia com fallback, fonte Montserrat se disponível
*/

/* Reset mínimo e acessibilidade */
* {
  box-sizing: border-box;
}
html {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}
body.book {
  margin: 0;
  line-height: 1.6;
  color: #222;
  background: #fff;
}
img,
svg {
  max-width: 100%;
  height: auto;
}

/* Fonte (usa Montserrat se existir, com fallback) */
@font-face {
  font-family: "Montserrat";
  src: url("fonts/Montserrat-SemiBold.otf") format("opentype");
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

:root {
  /* Variáveis descritivas de paleta */
  --color-title: #75c9dc; /* Título das Partes e Capítulos */
  --color-chapter-badge: #3b55a2; /* Fundo do número do capítulo */
  --color-section-muted: #80818e; /* Títulos de seção/subseção */
  --color-text: #222; /* Texto principal */
  --radius: 999px;

  /* Aliases para compatibilidade retroativa */
  --color-accent: var(--color-title);
  --color-badge: var(--color-chapter-badge);
  --color-muted: var(--color-section-muted);

  /* Tipografia */
  --font-heading: Montserrat, Arial, Helvetica, sans-serif;
  --font-body: Georgia, "Times New Roman", Times, serif;

  /* Medida ideal da linha para livros (largura de coluna) */
  --measure: 72ch;
}

body.book {
  font-family: var(--font-body);
  font-size: 1rem;
}

/* PARTES */
.part {
  position: relative;
  display: grid;
  place-items: center;
  text-align: center;
  margin-bottom: 10rem;
  overflow: hidden;
}
.part__background {
  grid-area: 1 / 1;
  width: 100%;
  height: auto;
  display: block;
}
.part__content {
  grid-area: 1 / 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding-top: 40%;
}
.part__label,
.part__title {
  position: static;
  transform: none;
  margin: 0;
}
.part__label {
  font-size: clamp(1rem, 4vw, 10rem);
  letter-spacing: 0.08em;
  font-weight: 600;
  color: #fff;
  font-family: var(--font-heading);
}
.part__number {
  margin-left: 0.5rem;
}
.part__title {
  margin: 0;
  color: var(--color-accent);
  font-size: clamp(1rem, 12vw, 30rem);
  font-weight: 700;
  font-family: var(--font-heading);
  text-transform: uppercase;
}

/* CAPÍTULOS */
.chapter {
  margin: 2rem 0;
  position: relative;
}
.chapter__header {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  background: var(--color-badge);
  flex-wrap: wrap;
  border-radius: 0 0 50% 50% / 0 0 300px 300px;
  padding: 3rem clamp(8rem, 25vw, 20rem) 6rem;
  text-align: center;
  color: var(--color-accent);
}
.chapter__number {
  color: #fff;
  font-size: 5rem;
  line-height: 1;
  font-weight: 700;
  font-family: var(--font-heading);
}
.chapter__title {
  margin: 0;
  color: var(--color-accent);
  line-height: 1.1;
  font-size: 3rem;
  font-weight: 700;
  font-family: var(--font-heading);
  text-transform: uppercase;
}

/* SEÇÕES e SUBSEÇÕES */
.section {
  margin: 1.5rem auto;
  max-width: var(--measure);
  padding: 0 1.25rem;
}
.section__title {
  margin: 1rem 0 0.5rem;
  color: var(--color-muted);
  font-size: 1.125rem;
  font-weight: 700;
  font-family: var(--font-heading);
  text-transform: uppercase;
}
.subsection__title {
  margin: 0.75rem 0 0.5rem;
  color: var(--color-muted);
  font-size: 1rem;
  font-weight: 600;
  font-family: var(--font-heading);
}
/* Parágrafos ao estilo de livro: texto justificado, hifenização e recuo da primeira linha exceto no primeiro parágrafo da seção */
.section p {
  margin: 0;
  text-align: justify;
  hyphens: auto;
  orphans: 3;
  widows: 3;
}
.section > p:first-of-type {
  text-indent: 0;
}
.section p + p {
  text-indent: 1.5em;
}
/* Capitular no primeiro parágrafo do capítulo (estético, opcional) */
.chapter .section:first-of-type > p:first-of-type::first-letter {
  float: left;
  font-size: 3.2em;
  line-height: 0.9;
  margin-right: 0.1em;
  font-family: var(--font-heading);
  color: var(--color-accent);
}

/* FIGURAS */
.figure {
  margin: 1.5rem 0;
}
.figure__placeholder {
  width: 100%;
  aspect-ratio: 16/9;
  background: #f2f4f8;
  border: 1px dashed #c7cbd3;
  border-radius: 6px;
}
.figure__caption {
  margin-top: 0.5rem;
  color: #444;
  font-size: 0.95rem;
  text-align: center;
}
/* Evitar que figuras e tabelas quebrem no meio ao imprimir */
.figure,
figure,
.table,
table {
  break-inside: avoid;
  page-break-inside: avoid;
}

/* TABELAS */
.table__container {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}
.table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.25rem 0;
  font-size: 0.95rem;
}
.table__caption {
  caption-side: top;
  color: #444;
  margin-bottom: 0.5rem;
  font-weight: 600;
  text-align: center;
}
.table th,
.table td {
  border: 1px solid #e1e4ea;
  padding: 0.5rem 0.6rem;
  text-align: left;
}
.table thead th {
  background: #f7f9fb;
  color: #333;
  font-weight: 700;
}

/* Utilitários */
.text-center {
  text-align: center;
}
.mt-0 {
  margin-top: 0;
}
.mt-1 {
  margin-top: 0.25rem;
}
.mt-2 {
  margin-top: 0.5rem;
}
.mt-3 {
  margin-top: 1rem;
}
.mt-4 {
  margin-top: 1.5rem;
}

/* Oculta conteúdo legado quando o body estiver marcado como 'clean' */
body.book.clean > :not(.__new) {
  display: none !important;
}
body.book.clean > .__new {
  display: block;
}

/* Links: discretos na tela; completos no papel */
a {
  color: inherit;
  text-decoration: underline;
  text-decoration-color: var(--color-accent);
}
@media print {
  a {
    color: inherit;
    text-decoration: none;
  }
  a[href^="http"]::after {
    content: " (" attr(href) ")";
    font-size: 0.85em;
  }
}

/* Impressão: tamanho de página, margens e quebras de capítulo/parte */
@media print {
  @page {
    size: A4;
    margin: 25mm 20mm;
  }
  .part {
    break-before: page;
  }
  .chapter {
    break-before: page;
  }
  .part__title,
  .chapter__title {
    page-break-after: avoid;
    break-after: avoid;
  }
  .figure__caption,
  .table__caption {
    page-break-before: avoid;
  }
  .table thead {
    display: table-header-group;
  }
}

@media (max-width: 720px) {
  .chapter__header {
    padding: 3rem clamp(2rem, 15vw, 20rem) 6rem;
    border-radius: 0 0 50% 50% / 0 0 250px 250px;
  }
  .chapter__number {
    font-size: 4rem;
  }
  .chapter__title {
    font-size: 2.5rem;
  }
}

@media (max-width: 480px) {
  .chapter__header {
    padding: 3rem clamp(1rem, 2vw, 20rem) 6rem;
    border-radius: 0 0 50% 50% / 0 0 150px 150px;
  }
  .chapter__number {
    font-size: 3rem;
  }
  .chapter__title {
    font-size: 2rem;
    text-align: center;
  }
}

/* Cabeçalhos correntes omitidos para compatibilidade ampla de navegadores */

/* Fallback: centraliza mesmo quando não usar as classes utilitárias */
figure > figcaption,
table > caption {
  text-align: center;
}
